<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Pruebas de js TPI</title>
    <link rel="stylesheet" href="https://unpkg.com/mocha/mocha.css" />
</head>

<body>
    <div id="mocha"></div>
    <script src="https://unpkg.com/chai/chai.js"></script>
    <script src="https://unpkg.com/mocha/mocha.js"></script>

    <script class="mocha-init">
        mocha.setup('bdd');
        // <--mocha.growl();  Enables web notifications-->
        mocha.checkLeaks();
    </script>

    <script type="module" class="mocha-exec">
        import ArticuloMD from '../js/model/ArticuloMD.js';
        import SucursalMD from '../js/model/SucursalMD.js';
        import ProductosMD from '../js/model/ProductosMD.js';
        import FacturacionMD from '../js/model/FacturacionMD.js';
        import cajaMD from '../js/model/cajaMD.js';
        import BodegaMD from '../js/model/BodegaMD.js';
        let artciuloResources = new ArticuloMD();
        let sucursalResources= new SucursalMD();
        let productosResources= new ProductosMD();
        let facturacionResources= new FacturacionMD();
        let cajaResources= new cajaMD();
        let bodegaResources =new BodegaMD();
        let resultado;

	sessionStorage.setItem("session", "{sucursal:'APA1508',caja:'1'}");
        
        //GET ARTICULOMD
        describe("Prueba para Articulo", function () {
            it("instancia de cut", function () {
                chai.assert.isDefined(artciuloResources);
            });
            it("Get ArticuloFilter", async function () {
                try {
                    resultado = await artciuloResources.filter("a");
                    chai.assert.equals(resultado.status, 200);
                } catch (e) {
                    console.log("ERROR" + e);
                };
            });


        });
        //GET PARA SUCURSALESMD
        describe("Prueba para Sucursal", function () {
            it("instancia de cut", function () {
                chai.assert.isDefined(sucursalResources);
            });

            it("Get Sucursales FindAll", async function () {

                try {
                    resultado = await sucursalResources.getSucursales();
                    chai.assert.equals(resultado.status, 200);
                } catch (e) {
                    console.log("ERROR" + e);
                };
            });
        });

        //GET PRODUCTOSMD
        describe("Prueba para Productos", function () {
            it("instancia de cut", function () {
                chai.assert.isDefined(productosResources);
            });

            it("Get Productos Find All", async function () {
                try {
                    resultado = await productosResources.getProductos();
                    chai.assert.equals(resultado.status, 200);
                } catch (e) {
                    console.log("ERROR" + e);
                };
            });

            it("Get Productos likes", async function () {
                try {
                    resultado = await productosResources.getProductosLike("a");
                    chai.assert.equals(resultado.status, 200);
                } catch (e) {
                    console.log("ERROR" + e);
                };
            });


            it("Get Productos Paginate", async function () {
                try {
                    resultado = await productosResources.getProductosPaginated("1", "3");
                    chai.assert.equals(resultado.status, 200);
                } catch (e) {
                    console.log("ERROR" + e);
                };
            });


        });

        //GET BodegaMD
        describe("Prueba de Abtract", function () {
            it("instancia de cut", function () {
                chai.assert.isDefined(bodegaResources);
            });

            it("Get BodegaFilter", async function () {
                try {
                    console.log("que paso man")
                    resultado = await bodegaResources.filter("a");
                    chai.assert.equals(resultado.status, 200);
                } catch (e) {
                    console.log("ERROR" + e);
                };
            });
            it("Get All ", async function () {
                try {
                    console.log("que paso man")
                    resultado = await bodegaResources.getAll();
                    chai.assert.equals(resultado.status, 200);
                } catch (e) {
                    console.log("ERROR" + e);
                };
            });

        });

        //GET CAJAMD
        describe("Prueba de Abtract", function () {
            it("instancia de cut", function () {
                chai.assert.isDefined(cajaResources);
            });

            it("Get Caja", async function () {
                try {
                    console.log("que paso man")
                    resultado = await cajaResources.getCaja(1);
                    chai.assert.equals(resultado.status, 200);
                } catch (e) {
                    console.log("ERROR" + e);
                };
            });


        });

        mocha.run();
    </script>

</body>

</html>

